# modules/config.py

DB_NAME = "fund_data.db"

# 百分比字段列表 (保持您原有的，不做删减)
PERCENT_COLUMNS = [
    "对应管理类费率合计", "管理费", "托管费", "服务费", "其他（如有）", 
    "业绩报酬计提比例", "申购费率", "赎回费率", "巨额赎回认定比例", 
    "行政服务费", "销售服务费", "投资顾问费", "申购费", "赎回费",
    "认购费率", "管理费率", "托管费率"
]

# 标准字段列表 (管理员视图用 - 严格保持您的原版结构)
STANDARD_COLUMNS = [
    "产品名称", "策略", "产品类型", "开放日", "可买份额类型", 
    "申购费", "赎回费", "对应管理类费率合计", "管理费", "托管费", 
    "服务费", "其他（如有）", "业绩基准", "业绩报酬计提比例", 
    "管理人", "风险评级", "申购起点", "托管人", "锁定期", 
    "投资经理", "申购确认日",  "赎回确认日","赎回回款日期", "公司实控人", "基金备案编号"
]

# 字段映射逻辑 (别名 -> 标准展示名)
# 解决Bug的关键：让“服务费合计”的数据能显示在“服务费”这一列
MAPPING_LOGIC = {
    # 基础信息
    "产品全称": "产品名称", 
    "管理人名称": "管理人", 
    "产品风险类别": "风险评级",
    "p_strategy": "策略",
    "p_risk": "风险评级",
    
    # 费率映射 (解决修改了合计不显示的问题)
    "管理费率": "管理费", 
    "托管费率": "托管费", 
    "服务费合计": "服务费", # 关键：把服务费合计 映射给 服务费
    "销售服务费": "服务费",
    "其他如有": "其他（如有）",
    
    # 交易费率
    "申购费率": "申购费", 
    "赎回费率": "赎回费",
    "认购费": "认购费率",

    # 日期与规则
    "首次认购/申购起点（不含认/申购费）": "申购起点", 
    "封闭期": "锁定期",
    "申购确定日": "申购确认日",
    "赎回确定日": "赎回确认日",
    "赎回回款日": "赎回回款日期"
}

# --- 全量Excel模板字段 (保持不变) ---
FULL_TEMPLATE_COLUMNS = [
    '产品全称', '销售模式', '管理人名称', '法定代表人/执行事务合伙人', '公司实控人', '基金备案编号', '联系人', 
    '联系人邮箱', '联系电话', '管理人登记编号', '注册地址', '通讯地址', '邮编', '合同沟通联系人', 
    '合同沟通联系人手机号', '合同沟通联系人邮箱', '托管人', '一、基金整体情况', '产品结构（是否分级）', 
    '产品类型', '产品风险类别', '预计存续期限', '运作方式', '二、份额的募集', '预计募集规模', 
    '首次认购/申购起点（不含认/申购费）', '追加认购/申购不低于（不含认/申购费）', '认购费率', 
    '资金清算账户中利息的计算/募集账户利息处理方式', '是否执行回访制度', '三、申购与赎回', '封闭期', 
    '开放日', '可买份额类型', '份额的锁定期', '临时开放（仅接受赎回）的触发情形', '临时开放次数', 
    '申购和赎回的预约机制', '申购确认日', '赎回确认日','赎回回款日期', '赎回金额限制', '申购费率', '赎回费率', 
    '赎回费归属', '巨额赎回认定比例', '违约赎回机制', '四、投资', '投资范围', '投资范围变更机制', 
    '投资目标', '投资策略', '策略', '投资限制', '建仓期', '份额净值保留位数', '预警和平仓线', 
    '投资经理', '五、费用与税收', '5.1管理费', '管理费率', '计算方式', '保底费', '支付频率', 
    '支付方式', '5.2托管费', '托管费率', '支付方式_2', '支付频率_2', '5.3服务费', '行政服务费', 
    '销售服务费', '投资顾问费', '服务费合计', '其他如有', 
    '对应管理类费率合计（管理费率+托管费率+服务费合计+其他如有）', '5.4业绩报酬', '计提方法', 
    '保底费_2', '支付方式_3', '业绩报酬计提比例', '计提基准日', 
    '统一计提的间隔控制（同时含固定时点和分红时）', '收取主体', '业绩基准', '六、收益分配', 
    '存续期内的分红', '可供分配利润（若有分红，请填写）', '分红次数（若有分红，请填写）', 
    '七、信息披露与其他', '信息披露网站', '份额净值披露频率', '份额持有人大会日常机构', '八、其它信息', 
    '8.1管理人收取费用账户', '账户名称', '账户号', '开户银行', '投资顾问信息（如有）', 
    '其他募集账户信息（若有）'
]